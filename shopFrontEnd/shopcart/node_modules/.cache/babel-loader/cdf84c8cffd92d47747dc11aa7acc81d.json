{"remainingRequest":"/Users/yujunxiong/Desktop/shopFrontEnd/shopcart/node_modules/babel-loader/lib/index.js!/Users/yujunxiong/Desktop/shopFrontEnd/shopcart/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/yujunxiong/Desktop/shopFrontEnd/shopcart/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/yujunxiong/Desktop/shopFrontEnd/shopcart/src/components/user/HeadPortrait.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/yujunxiong/Desktop/shopFrontEnd/shopcart/src/components/user/HeadPortrait.vue","mtime":1653326700916},{"path":"/Users/yujunxiong/Desktop/shopFrontEnd/shopcart/babel.config.js","mtime":1650971271303},{"path":"/Users/yujunxiong/Desktop/shopFrontEnd/shopcart/node_modules/cache-loader/dist/cjs.js","mtime":1650971228569},{"path":"/Users/yujunxiong/Desktop/shopFrontEnd/shopcart/node_modules/babel-loader/lib/index.js","mtime":1650971231053},{"path":"/Users/yujunxiong/Desktop/shopFrontEnd/shopcart/node_modules/cache-loader/dist/cjs.js","mtime":1650971228569},{"path":"/Users/yujunxiong/Desktop/shopFrontEnd/shopcart/node_modules/vue-loader-v16/dist/index.js","mtime":1650971226130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy95dWp1bnhpb25nL0Rlc2t0b3Avc2hvcEZyb250RW5kL3Nob3BjYXJ0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgZW1pdHRlciBmcm9tICdAL3V0aWxzL2V2ZW50JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdIZWFkUG9ydHJhaXQnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1cGxvYWRJbWdVcmw6ICcnCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgdXBsb2FkSW1nOiBmdW5jdGlvbiB1cGxvYWRJbWcoZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGZpbGUgPSBlLnRhcmdldC5maWxlc1swXTsgLy8gS0LljZXkvY0s5Y+v5Lul6I635Y+W5Zu+54mH55qE5aSn5bCP77yM5Yiw5pe25YCZ5Y+v5Lul5qC55o2u5Zu+54mH5aSn5bCP6L+b6KGM6YCJ5oup5LiK5LygCgogICAgICB2YXIgaW1nU2l6ZSA9IGZpbGUuc2l6ZSAvIDEwMjQ7CiAgICAgIGNvbnNvbGUubG9nKGltZ1NpemUpOwogICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7CgogICAgICByZWFkZXIub25sb2FkZW5kID0gZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLnVwbG9hZEltZ1VybCA9IHJlYWRlci5yZXN1bHQ7CiAgICAgIH07CiAgICB9LAogICAgdXBsb2FkSW1hZ2VVcmw6IGZ1bmN0aW9uIHVwbG9hZEltYWdlVXJsKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIF95aWVsZCRfdGhpcywgZGF0YTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBfeWllbGQkX3RoaXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgZGF0YSA9IF95aWVsZCRfdGhpcy5yZXM7CgogICAgICAgICAgICAgICAgX3RoaXMyLiRqc29ucCgnaHR0cHM6Ly9zbS5tcy9hcGkvdjIvdXBsb2FkLycsIHsKICAgICAgICAgICAgICAgICAgZmlsZTogX3RoaXMyLnVwbG9hZEltZ1VybAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogJ2hBb0tDMERFZlM1MHdFR3pBUFFlbHcydjFYak0xNG9YJwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8g5YWz6Zet5aS05YOP6YCJ5oupCiAgICBjbG9zZV9oZWFkX3BvcnRyYWl0OiBmdW5jdGlvbiBjbG9zZV9oZWFkX3BvcnRyYWl0KCkgewogICAgICBlbWl0dGVyLmVtaXQoJ3Nob3cnLCB7CiAgICAgICAgYWltOiBmYWxzZQogICAgICB9KTsKICAgICAgdGhpcy51cGxvYWRJbWdVcmwgPSAnJzsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;AA4BA,OAAOA,OAAP,MAAoB,eAApB;AACA,eAAe;AACbC,MAAI,EAAE,cADO;AAEbC,MAFa,kBAEL;AACN,WAAO;AACLC,kBAAY,EAAE;AADT,KAAP;AAGD,GANY;AAObC,SAAO,EAAE;AACPC,aADO,qBACIC,CADJ,EACO;AAAA;;AACZ,UAAIC,IAAG,GAAID,CAAC,CAACE,MAAF,CAASC,KAAT,CAAe,CAAf,CAAX,CADY,CAEZ;;AACA,UAAIC,OAAM,GAAIH,IAAI,CAACI,IAAL,GAAY,IAA1B;AACAC,aAAO,CAACC,GAAR,CAAYH,OAAZ;AACA,UAAII,MAAK,GAAI,IAAIC,UAAJ,EAAb;AACAD,YAAM,CAACE,aAAP,CAAqBT,IAArB;;AACAO,YAAM,CAACG,SAAP,GAAmB,YAAM;AACvB,aAAI,CAACd,YAAL,GAAoBW,MAAM,CAACI,MAA3B;AACF,OAFA;AAGD,KAXM;AAYDC,kBAZC,4BAYiB;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACG,MADH;;AAAA;AAAA;AACXjB,oBADW,gBACfkB,GADe;;AAEtB,sBAAI,CAACC,MAAL,CAAY,8BAAZ,EAA4C;AAAEd,sBAAI,EAAE,MAAI,CAACJ;AAAb,iBAA5C,EAAyE;AAAEmB,yBAAO,EAAE;AAAEC,iCAAa,EAAE;AAAjB;AAAX,iBAAzE,EAA6IC,IAA7I,CAAkJ,UAACJ,GAAD,EAAS;AACzJR,yBAAO,CAACC,GAAR,CAAYO,GAAZ;AACD,iBAFD,EAEGK,KAFH,CAES,UAACC,GAAD,EAAS;AAChBd,yBAAO,CAACC,GAAR,CAAYa,GAAZ;AACD,iBAJD;;AAFsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOvB,KAnBM;AAoBP;AACAC,uBArBO,iCAqBgB;AACrB3B,aAAO,CAAC4B,IAAR,CAAa,MAAb,EAAqB;AAAEC,WAAG,EAAE;AAAP,OAArB;AACA,WAAK1B,YAAL,GAAoB,EAApB;AACF;AAxBO;AAPI,CAAf","names":["emitter","name","data","uploadImgUrl","methods","uploadImg","e","file","target","files","imgSize","size","console","log","reader","FileReader","readAsDataURL","onloadend","result","uploadImageUrl","res","$jsonp","headers","Authorization","then","catch","err","close_head_portrait","emit","aim"],"sourceRoot":"","sources":["/Users/yujunxiong/Desktop/shopFrontEnd/shopcart/src/components/user/HeadPortrait.vue"],"sourcesContent":["<template>\n  <div id=\"head-portrait\">\n    <div class=\"title\">\n      <div>自定义头像</div>\n      <span class=\"iconfont\" @click=\"close_head_portrait\">&#xeca0;</span>\n    </div>\n    <div class=\"tips\">\n      <label for=\"image\">上传头像</label>\n      <span>支持大小不超过 5M 的jpg，png的图片</span>\n      <input id=\"image\" type=\"file\" accept=\"image/jpeg,image/x-png,image/gif\" style=\"display: none;\" @change=\"uploadImg($event)\"/>\n    </div>\n    <div id=\"content\">\n      <div class=\"show\">\n        <img :src=\"uploadImgUrl\" alt=\"\" />\n      </div>\n      <div class=\"preview\">\n        <span>预览</span>\n        <div :style=\"{backgroundImage: 'url('+uploadImgUrl+')'}\"></div>\n      </div>\n    </div>\n    <div class=\"operation\">\n      <span @click=\"uploadImageUrl\">保存</span>\n      <span @click=\"close_head_portrait\">取消</span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport emitter from '@/utils/event'\nexport default {\n  name: 'HeadPortrait',\n  data () {\n    return {\n      uploadImgUrl: ''\n    }\n  },\n  methods: {\n    uploadImg (e) {\n      let file = e.target.files[0]\n      // KB单位,可以获取图片的大小，到时候可以根据图片大小进行选择上传\n      let imgSize = file.size / 1024\n      console.log(imgSize)\n      let reader = new FileReader()\n      reader.readAsDataURL(file)\n      reader.onloadend = () => {\n        this.uploadImgUrl = reader.result\n      }\n    },\n    async uploadImageUrl () {\n      const {res:data} = await this\n      this.$jsonp('https://sm.ms/api/v2/upload/', { file: this.uploadImgUrl }, { headers: { Authorization: 'hAoKC0DEfS50wEGzAPQelw2v1XjM14oX' } }).then((res) => {\n        console.log(res)\n      }).catch((err) => {\n        console.log(err)\n      })\n    },\n    // 关闭头像选择\n    close_head_portrait () {\n      emitter.emit('show', { aim: false })\n      this.uploadImgUrl = ''\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n#head-portrait {\n  width: 500px;\n  height: 400px;\n  z-index: 2;\n  border: 4px solid #BF809F;\n  background-color: #fff;\n  position: absolute;\n  top: 0;\n  left: 50%;\n  transform: translate(-50%, 20px);\n  .title {\n    width: 90%;\n    height: 48px;\n    border-bottom: 1px solid #ddd;\n    margin: 0 auto;\n    position: relative;\n    div {\n      border-bottom: 2px solid black;\n      width: 90px;\n      height: 48px;\n      line-height: 48px;\n      text-align: center;\n      font-size: 12px;\n    }\n    span {\n      position: absolute;\n      right: -19px;\n      top: 5px;\n      cursor: pointer;\n    }\n  }\n}\n.tips {\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  font-size: 12px;\n  height: 52px;\n  width: 444px;\n  margin: 0 auto;\n  label {\n    width: 100px;\n    height: 32px;\n    border: 1px solid #C2C2C2;\n    background-color: #fafafa;\n    text-align: center;\n    line-height: 32px;\n    margin-right: 15px;\n    cursor: pointer;\n  }\n}\n#content {\n  width: 442px;\n  border: 1px solid #DDDDDD;\n  height: 237px;\n  margin: 0 auto;\n  display: flex;\n  .show {\n    width: 260px;\n    border-right: 1px solid #DDD;\n    display: flex;\n    justify-content: center;\n    overflow: hidden;\n    img {\n      height: 237px;\n    }\n  }\n  .preview {\n    width: 179px;\n    display: flex;\n    flex-direction: column;\n    span {\n      margin: 30px 0 10px 30px;\n      font-size: 12px;\n      font-weight: bold;\n    }\n    div {\n      width: 108px;\n      height: 108px;\n      background-position: center;\n      background-repeat: no-repeat;\n      background-size: cover;\n      margin-left: 45px;\n      border-radius: 50%;\n    }\n  }\n}\n.operation {\n  width: 235px;\n  height: 50px;\n  margin: 0 auto;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  span {\n    width: 100px;\n    height: 32px;\n    text-align: center;\n    line-height: 32px;\n    border: 1px solid #C2C2C2;\n    cursor: pointer;\n    border-radius: 5px;\n    &:first-child {\n      background-color: #409EFF;\n      color: #fff;\n      border: 0;\n    }\n  }\n}\n</style>\n"]}]}