{"remainingRequest":"/Users/yujunxiong/Desktop/shopFrontEnd/shopcart/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/yujunxiong/Desktop/shopFrontEnd/shopcart/src/components/user/HeadPortrait.vue?vue&type=template&id=210d5bc2&scoped=true","dependencies":[{"path":"/Users/yujunxiong/Desktop/shopFrontEnd/shopcart/src/components/user/HeadPortrait.vue","mtime":1655537660603},{"path":"/Users/yujunxiong/Desktop/shopFrontEnd/shopcart/node_modules/cache-loader/dist/cjs.js","mtime":1650971228569},{"path":"/Users/yujunxiong/Desktop/shopFrontEnd/shopcart/node_modules/babel-loader/lib/index.js","mtime":1650971231053},{"path":"/Users/yujunxiong/Desktop/shopFrontEnd/shopcart/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1650971228811},{"path":"/Users/yujunxiong/Desktop/shopFrontEnd/shopcart/node_modules/cache-loader/dist/cjs.js","mtime":1650971228569},{"path":"/Users/yujunxiong/Desktop/shopFrontEnd/shopcart/node_modules/vue-loader-v16/dist/index.js","mtime":1650971226130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgPGRpdiBpZD0iaGVhZC1wb3J0cmFpdCI+CiAgICA8ZGl2IGNsYXNzPSJ0aXRsZSI+CiAgICAgIDxkaXY+6Ieq5a6a5LmJ5aS05YOPPC9kaXY+CiAgICAgIDxzcGFuIGNsYXNzPSJpY29uZm9udCIgQGNsaWNrPSJjbG9zZV9oZWFkX3BvcnRyYWl0Ij4mI3hlY2EwOzwvc3Bhbj4KICAgIDwvZGl2PgogICAgPGRpdiBjbGFzcz0idGlwcyI+CiAgICAgIDxlbC11cGxvYWQKICAgICAgICByZWY9InVwbG9hZCIKICAgICAgICBhY3Rpb249Imh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC91c2VyL3VwaW1hZ2UvIgogICAgICAgIDpoZWFkZXJzPSJjb25maWciCiAgICAgICAgOm9uLXByb2dyZXNzPSJ1cExvYWQiCiAgICAgICAgOmJlZm9yZS11cGxvYWQ9ImJlZm9yZUF2YXRhclVwbG9hZCIKICAgICAgICA6ZmlsZS1saXN0PSJmaWxlTGlzdCIKICAgICAgICBsaXN0LXR5cGU9InBpY3R1cmUtY2FyZCIKICAgICAgICA6b24tc3VjY2Vzcz0iaGFuZGxlQXZhdGFyU3VjY2VzcyIKICAgICAgICA6YXV0by11cGxvYWQ9ImZhbHNlIj4KICAgICAgICA8ZGl2IGNsYXNzPSJ1cEltYWdlIj7kuIrkvKDlpLTlg488L2Rpdj4KICAgICAgPC9lbC11cGxvYWQ+CiAgICAgIDxzcGFuPuaUr+aMgeWkp+Wwj+S4jei2hei/hyA1TSDnmoRqcGfvvIxwbmfnmoTlm77niYc8L3NwYW4+CiAgICA8L2Rpdj4KICAgIDxkaXYgaWQ9ImNvbnRlbnQiPgogICAgICA8ZGl2IGNsYXNzPSJzaG93Ij4KICAgICAgICA8aW1nIDpzcmM9ImZpbGVMaXN0WzBdPy51cmwiIGFsdD0iIiAvPgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0icHJldmlldyI+CiAgICAgICAgPHNwYW4+6aKE6KeIPC9zcGFuPgogICAgICAgIDxkaXYgOnN0eWxlPSJ7YmFja2dyb3VuZEltYWdlOiAndXJsKCcrZmlsZUxpc3RbMF0/LnVybCsnKSd9Ij48L2Rpdj4KICAgICAgICA8ZWwtcHJvZ3Jlc3MgdHlwZT0iY2lyY2xlIiB2LXNob3c9InByb2dyZXNzRmxhZyIgOnBlcmNlbnRhZ2U9ImxvYWRQcm9ncmVzcyIgOnN0YXR1cz0idHJhbnNtaXNzaW9uIiBjbGFzcz0icHJvZ3Jlc3MiPjwvZWwtcHJvZ3Jlc3M+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJvcGVyYXRpb24iPgogICAgICA8c3BhbiBAY2xpY2s9InN1Ym1pdFVwbG9hZCI+5L+d5a2YPC9zcGFuPgogICAgICA8c3BhbiBAY2xpY2s9ImNsb3NlX2hlYWRfcG9ydHJhaXQiPuWPlua2iDwvc3Bhbj4KICAgIDwvZGl2PgogIDwvZGl2Pgo="},{"version":3,"sources":["/Users/yujunxiong/Desktop/shopFrontEnd/shopcart/src/components/user/HeadPortrait.vue"],"names":[],"mappings":"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AAC,CAAC,CAAC,CAAC;MACf,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACf,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;MACvC,CAAC,CAAC,CAAC,CAAC,CAAC;MACL,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACd,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAClE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACnI,CAAC,CAAC,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACpB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACpC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7C,CAAC,CAAC,CAAC,CAAC,CAAC;EACP,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/Users/yujunxiong/Desktop/shopFrontEnd/shopcart/src/components/user/HeadPortrait.vue","sourceRoot":"","sourcesContent":["<template>\n  <div id=\"head-portrait\">\n    <div class=\"title\">\n      <div>自定义头像</div>\n      <span class=\"iconfont\" @click=\"close_head_portrait\">&#xeca0;</span>\n    </div>\n    <div class=\"tips\">\n      <el-upload\n        ref=\"upload\"\n        action=\"http://localhost:8000/user/upimage/\"\n        :headers=\"config\"\n        :on-progress=\"upLoad\"\n        :before-upload=\"beforeAvatarUpload\"\n        :file-list=\"fileList\"\n        list-type=\"picture-card\"\n        :on-success=\"handleAvatarSuccess\"\n        :auto-upload=\"false\">\n        <div class=\"upImage\">上传头像</div>\n      </el-upload>\n      <span>支持大小不超过 5M 的jpg，png的图片</span>\n    </div>\n    <div id=\"content\">\n      <div class=\"show\">\n        <img :src=\"fileList[0]?.url\" alt=\"\" />\n      </div>\n      <div class=\"preview\">\n        <span>预览</span>\n        <div :style=\"{backgroundImage: 'url('+fileList[0]?.url+')'}\"></div>\n        <el-progress type=\"circle\" v-show=\"progressFlag\" :percentage=\"loadProgress\" :status=\"transmission\" class=\"progress\"></el-progress>\n      </div>\n    </div>\n    <div class=\"operation\">\n      <span @click=\"submitUpload\">保存</span>\n      <span @click=\"close_head_portrait\">取消</span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport emitter from '@/utils/event'\nexport default {\n  name: 'HeadPortrait',\n  data () {\n    return {\n      fileList: [],\n      token: '',\n      progressFlag: false,\n      loadProgress: 0,\n      timer: null,\n      timer2: null,\n      transmission: 'success'\n    }\n  },\n  computed: {\n    config () {\n      return { Authorization: `JWT ${this.token}` }\n    }\n  },\n  methods: {\n    // 头像上传成功\n    handleAvatarSuccess (response, file, fileList) {\n      if (response.code === 200) {\n        emitter.emit('image', { aim: response.data })\n        this.timer = setInterval(() => {\n          if (this.loadProgress < 100) {\n            this.loadProgress++\n            if (this.loadProgress === 100) {\n              clearInterval(this.timer)\n              this.timer = null\n              clearInterval(this.timer2)\n              this.timer2 = null\n              this.$message({ message: '上传成功', type: 'success' })\n            }\n          }\n        }, 10)\n      } else {\n        this.transmission = 'exception'\n        this.$message.error('上传失败请稍后重试')\n      }\n    },\n    upLoad (event, file, fileList) {\n      this.progressFlag = true\n      this.timer2 = setInterval(() => {\n        this.loadProgress++\n        if (this.loadProgress > 72) {\n          clearInterval(this.timer2)\n          // 这里必须使用this.timer = null，否则清除定时器无效\n          this.timer2 = null\n        }\n      }, 100)\n    },\n    // 点击上传头像\n    submitUpload () {\n      this.token = this.$store.state.token\n      this.loadProgress = 0\n      this.$refs.upload.submit()\n    },\n    // 关闭头像选择\n    close_head_portrait () {\n      emitter.emit('show', { aim: false })\n      this.progressFlag = false\n      this.loadProgress = 0\n      this.fileList = []\n    },\n    // 上传文件的限制\n    beforeAvatarUpload (file) {\n      const isJPG = file.type === 'image/png' || 'image/jpeg'\n      const isLt5M = file.size / 1024 / 1024 < 5\n\n      if (!isJPG) {\n        this.$message.error('上传头像图片只能是 JPG/PNG 格式!')\n      }\n      if (!isLt5M) {\n        this.$message.error('上传头像图片大小不能超过 5MB!')\n      }\n      return isJPG && isLt5M\n    }\n  },\n  watch: {\n    fileList: {\n      handler (newVal, oldVal) {\n        if (newVal.length > 1) {\n          newVal.splice(0, 1)\n          this.progressFlag = false\n          this.loadProgress = 0\n        }\n      },\n      deep: true\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n#head-portrait {\n  width: 500px;\n  height: 400px;\n  z-index: 2;\n  border: 4px solid #BF809F;\n  background-color: #fff;\n  position: absolute;\n  top: 0;\n  left: 50%;\n  transform: translate(-50%, 20px);\n  .title {\n    width: 90%;\n    height: 48px;\n    border-bottom: 1px solid #ddd;\n    margin: 0 auto;\n    position: relative;\n    div {\n      border-bottom: 2px solid black;\n      width: 90px;\n      height: 48px;\n      line-height: 48px;\n      text-align: center;\n      font-size: 12px;\n    }\n    span {\n      position: absolute;\n      right: -19px;\n      top: 5px;\n      cursor: pointer;\n    }\n  }\n}\n.tips {\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  font-size: 12px;\n  height: 52px;\n  width: 444px;\n  margin: 0 auto;\n  .upImage {\n    width: 100px;\n    height: 32px;\n    border: 1px solid #C2C2C2;\n    background-color: #fafafa;\n    text-align: center;\n    line-height: 32px;\n    cursor: pointer;\n  }\n}\n#content {\n  width: 442px;\n  border: 1px solid #DDDDDD;\n  height: 237px;\n  margin: 0 auto;\n  display: flex;\n  .show {\n    width: 260px;\n    border-right: 1px solid #DDD;\n    display: flex;\n    justify-content: center;\n    overflow: hidden;\n    img {\n      height: 237px;\n    }\n  }\n  .preview {\n    width: 179px;\n    display: flex;\n    flex-direction: column;\n    position: relative;\n    span {\n      margin: 30px 0 10px 30px;\n      font-size: 12px;\n      font-weight: bold;\n    }\n    div {\n      width: 108px;\n      height: 108px;\n      background-position: center;\n      background-repeat: no-repeat;\n      background-size: cover;\n      margin-left: 45px;\n      border-radius: 50%;\n    }\n    .progress {\n      position: absolute;\n      z-index: -1;\n      top: 50px;\n      left: -9px;\n      width: 125px;\n      height: 125px;\n    }\n  }\n}\n.operation {\n  width: 235px;\n  height: 50px;\n  margin: 0 auto;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  span {\n    width: 100px;\n    height: 32px;\n    text-align: center;\n    line-height: 32px;\n    border: 1px solid #C2C2C2;\n    cursor: pointer;\n    border-radius: 5px;\n    &:first-child {\n      background-color: #6C9AE1;\n      color: #fff;\n      border: 0;\n    }\n  }\n}\n:deep(.el-upload-list__item) {\n  display: none;\n}\n:deep(.el-upload--picture-card) {\n  width: 100px;\n  height: 32px;\n  margin-right: 15px;\n  border: 0;\n}\n</style>\n"]}]}